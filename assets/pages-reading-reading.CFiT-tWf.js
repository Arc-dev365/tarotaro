import{c as a,w as e,j as t,K as s,h as n,s as i,v as d,A as r,i as o,o as l,a as c,x as g,F as u,y as f,b as m,q as h,e as p,t as _,u as R,l as k}from"./index-smSU8IZZ.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=b({data:()=>({reading:{id:"",date:"",type:"",question:"",cards:[],reading:""},formattedReading:"",currentDate:""}),onLoad(a){this.setCurrentDate(),a.id?this.loadReadingById(a.id):a.type&&this.loadTempReading()},methods:{setCurrentDate(){const a=new Date,e=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");this.currentDate=`${e}年${t}月${s}日`},loadReadingById(a){const e=(d("recent_readings")||[]).find(e=>e.id===a);e?(this.reading=e,this.formatReading()):(n({title:"未找到该解读",icon:"none"}),setTimeout(()=>{s()},1500))},loadTempReading(){const a=d("temp_reading");a?(this.reading=a,this.formatReading(),r("temp_reading")):(n({title:"未找到解读数据",icon:"none"}),setTimeout(()=>{s()},1500))},formatReading(){if(this.reading.reading){let a=this.reading.reading.replace(/\n\n/g,"<br><br>").replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");this.formattedReading=a}},getPositionName(a,e){if("今日塔罗"===e){return["过去","现在","未来"][a]||`位置${a+1}`}if("快速塔罗"===e||"定向塔罗"===e){return["过去/根源","现在/情况","未来/结果"][a]||`位置${a+1}`}return["过去","现在","未来"][a]||`位置${a+1}`},shareReading(){i({title:"分享",content:"分享功能开发中，敬请期待",showCancel:!1})},saveReading(){n({title:"解读已保存",icon:"success"})},goBack(){s()},goHome(){t({url:"/pages/home/home"})}}},[["render",function(t,s,n,i,d,r){const b=m,C=o,v=R,y=k;return l(),a(C,{class:"reading-container"},{default:e(()=>[c(C,{class:"cards-display"},{default:e(()=>[(l(!0),g(u,null,f(d.reading.cards,(t,s)=>(l(),a(C,{class:"card-item",key:s},{default:e(()=>[c(b,{class:h(["card-image",{"reversed-image":!t.isUpright}]),src:t.img||"/static/tarot/major/0-愚者.jpg",mode:"aspectFit"},null,8,["src","class"]),c(C,{class:"card-info"},{default:e(()=>[c(C,{class:"card-name"},{default:e(()=>[p(_(t.name),1)]),_:2},1024),c(C,{class:h(["card-orientation",{reversed:!t.isUpright}])},{default:e(()=>[p(_(t.isUpright?"正位":"逆位"),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),c(C,{class:"reading-content"},{default:e(()=>[d.formattedReading?(l(),a(v,{key:1,nodes:d.formattedReading},null,8,["nodes"])):(l(),a(C,{key:0,class:"loading-indicator"},{default:e(()=>[c(C,{class:"loading-text"},{default:e(()=>[p("正在解读中...")]),_:1}),c(C,{class:"loading-dots"},{default:e(()=>[c(C,{class:"dot"}),c(C,{class:"dot"}),c(C,{class:"dot"})]),_:1})]),_:1}))]),_:1}),c(C,{class:"action-buttons"},{default:e(()=>[c(y,{class:"share-btn",onClick:r.shareReading},{default:e(()=>[p("分享解读")]),_:1},8,["onClick"]),c(y,{class:"save-btn",onClick:r.saveReading},{default:e(()=>[p("保存解读")]),_:1},8,["onClick"])]),_:1}),c(C,{class:"navigation-buttons"},{default:e(()=>[c(y,{class:"back-btn",onClick:r.goBack},{default:e(()=>[p("返回")]),_:1},8,["onClick"]),c(y,{class:"home-btn",onClick:r.goHome},{default:e(()=>[p("回到首页")]),_:1},8,["onClick"])]),_:1})]),_:1})}],["__scopeId","data-v-47e10f59"]]);export{C as default};
