import{H as n,J as t}from"./index-smSU8IZZ.js";const e={startTimes:{},start(n){this.startTimes[n]=Date.now(),console.log(`â±ï¸ [${n}] å¼€å§‹è®¡æ—¶`)},end(n){if(!this.startTimes[n])return console.warn(`âš ï¸ [${n}] æœªæ‰¾åˆ°å¼€å§‹æ—¶é—´`),0;const t=Date.now()-this.startTimes[n];return console.log(`âœ… [${n}] å®Œæˆï¼Œè€—æ—¶: ${t}ms`),delete this.startTimes[n],t},getCurrentDuration(n){return this.startTimes[n]?Date.now()-this.startTimes[n]:(console.warn(`âš ï¸ [${n}] æœªæ‰¾åˆ°å¼€å§‹æ—¶é—´`),0)},measure(n,t){return async(...e)=>{this.start(t);try{const o=await n(...e);return this.end(t),o}catch(o){throw this.end(t),o}}}},o=n=>{const t=["å†…åœ¨åŠ›é‡å’Œæ½œèƒ½","è½¬å˜å’Œæ–°çš„å¼€å§‹","æ™ºæ…§å’Œå†…åœ¨çš„å£°éŸ³","ç¨³å®šå’Œç‰©è´¨åŸºç¡€","é€‰æ‹©å’Œå†³ç­–æ—¶åˆ»","å’Œè°ä¸å¹³è¡¡","æˆåŠŸå’Œæˆå°±","å†…åœ¨çš„å¹³é™å’Œæ»¡è¶³"];return t[Math.floor(Math.random()*t.length)]},s=(n,t=!0)=>{const e=t?["ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œæ¥å—æ–°çš„å¯èƒ½æ€§","ç›¸ä¿¡è‡ªå·±çš„ç›´è§‰å’Œåˆ¤æ–­","å…³æ³¨å½“ä¸‹ï¼Œä¸è¦è¿‡åˆ†æ‹…å¿§æœªæ¥","å¯»æ±‚å¹³è¡¡ï¼Œä¸è¦èµ°å‘æç«¯","å‹‡æ•¢é¢å¯¹æŒ‘æˆ˜ï¼Œè¿™å°†å¸¦æ¥æˆé•¿","ä¸é‡è¦çš„äººä¿æŒæ²Ÿé€šå’Œè”ç³»","ç»™è‡ªå·±ä¸€äº›æ—¶é—´å’Œç©ºé—´è¿›è¡Œåæ€","é‡‡å–å…·ä½“è¡ŒåŠ¨ï¼Œè€Œä¸ä»…ä»…æ˜¯è®¡åˆ’"]:["æ³¨æ„ä¸è¦è¿‡äºå†²åŠ¨æˆ–é²è½","é¿å…è¿‡åº¦åˆ†æå¯¼è‡´çš„çŠ¹è±«ä¸å†³","è­¦æƒ•å¯èƒ½çš„è¯¯å¯¼æˆ–æ¬ºéª—","ä¸è¦å¿½è§†é‡è¦çš„ç»†èŠ‚æˆ–è­¦å‘Šä¿¡å·","é¿å…è¿‡åº¦ä¾èµ–ä»–äººçš„æ„è§","æ³¨æ„ä¸è¦é™·å…¥æ¶ˆææ€ç»´æ¨¡å¼","é¿å…é€ƒé¿è´£ä»»æˆ–å›°éš¾æƒ…å†µ","ä¸è¦è®©è¿‡å»çš„å¤±è´¥é˜»ç¢ä½ å‰è¿›"];return e[Math.floor(Math.random()*e.length)]},r=()=>{const n=["è½¬å˜å’Œæˆé•¿","åæ€å’Œå†…çœ","å†³ç­–å’Œé€‰æ‹©","ç¨³å®šå’Œå·©å›º","æŒ‘æˆ˜å’Œæœºé‡å¹¶å­˜","æ”¶è·å’Œæˆå°±"];return n[Math.floor(Math.random()*n.length)]},a=()=>{const n=["å¸¦æ¥æ–°çš„æœºä¼šå’Œå¯èƒ½æ€§","å¸®åŠ©ä½ åšå‡ºé‡è¦å†³å®š","è®©ä½ æ”¶è·ä¹‹å‰åŠªåŠ›çš„æˆæœ","è™½æœ‰æŒ‘æˆ˜ï¼Œä½†æœ€ç»ˆä¼šæœ‰æ‰€æ”¶è·","å¼•å¯¼ä½ å‘ç°æ–°çš„æ–¹å‘å’Œç›®æ ‡","å¸®åŠ©ä½ ä¸é‡è¦çš„äººå»ºç«‹æ›´æ·±å±‚æ¬¡çš„è”ç³»"];return n[Math.floor(Math.random()*n.length)]},c=async(n,t,e="",c="daily",i)=>{console.log(`å¼€å§‹ç”Ÿæˆå¡”ç½—ç‰Œè§£è¯»: ç±»å‹=${c}, ç‰Œé˜µ=${t}, é—®é¢˜=${e||"æ— "}`),console.log("æŠ½å–çš„ç‰Œ:",n.map(n=>n.name).join(", "));let l="";"daily"===c?l+="**ä»Šæ—¥å¡”ç½—è§£è¯»**\n\n":"quick"===c?l+="**å¿«é€Ÿå¡”ç½—è§£è¯»**\n\n":"custom"===c&&(l+=`**å®šå‘å¡”ç½—è§£è¯»: ${e}**\n\n`),"function"==typeof i&&(i(l),await new Promise(n=>setTimeout(n,500)));for(let r=0;r<n.length;r++){const t=n[r];let e="";"daily"===c||"quick"===c?e=0===r?"è¿‡å»/é—®é¢˜æ ¹æº":1===r?"ç°åœ¨/å½“å‰æƒ…å†µ":"æœªæ¥/å¯èƒ½ç»“æœ":"custom"===c&&(e=0===r?"å½“å‰çŠ¶å†µ":1===r?"éšœç¢æˆ–åŠ©åŠ›":"å»ºè®®æˆ–ç»“æœ"),l+=`**${e} - ${t.name}**\n\n`,l+=`${t.name}ä»£è¡¨ç€${o(t.name)}ã€‚åœ¨${e}çš„ä½ç½®ï¼Œå®ƒ${t.isUpright?"æ­£ä½":"é€†ä½"}æ˜¾ç¤º${s(e,t.isUpright)}ã€‚\n\n`,"function"==typeof i&&(i(l),await new Promise(n=>setTimeout(n,500)))}return l+="**ç‰Œä¸ç‰Œä¹‹é—´çš„å…³ç³»åˆ†æ**\n\n",l+=`${n[0].name}ä¸${n[1].name}çš„ç»„åˆæ˜¾ç¤ºï¼Œä½ çš„è¿‡å»ç»å†æ­£åœ¨å½±å“å½“å‰çš„æƒ…å†µã€‚${n.length>2?`è€Œ${n[2].name}åˆ™é¢„ç¤ºç€å¯èƒ½çš„æœªæ¥å‘å±•æ–¹å‘ã€‚`:""}\n\n`,"function"==typeof i&&(i(l),await new Promise(n=>setTimeout(n,500))),l+="**ç»¼åˆè§£è¯»å’Œå»ºè®®**\n\n","daily"===c?l+=`ä»Šå¤©æ˜¯å……æ»¡${r()}çš„ä¸€å¤©ã€‚è¿‡å»çš„ç»éªŒå·²ç»ä¸ºä½ å¥ å®šäº†åŸºç¡€ï¼Œç°åœ¨çš„æƒ…å†µè™½æœ‰æŒ‘æˆ˜ä½†ä¹Ÿè•´å«æœºä¼šï¼Œæœªæ¥çš„å‘å±•å–å†³äºä½ ä»Šå¤©çš„é€‰æ‹©ã€‚ä¿æŒç§¯æçš„å¿ƒæ€ï¼Œç›¸ä¿¡è‡ªå·±çš„ç›´è§‰ï¼Œä»Šå¤©å°†ä¼šæ˜¯å¯Œæœ‰æˆæ•ˆçš„ä¸€å¤©ã€‚\n\n`:"quick"===c?l+=`è¿‘æœŸä½ å¯èƒ½ä¼šç»å†${r()}ã€‚è¿™æ®µæ—¶é—´é‡Œï¼Œé‡è¦çš„æ˜¯ä¿æŒå¹³è¡¡å’Œä¸“æ³¨ï¼Œä¸è¦è¢«çŸ­æœŸçš„å›°éš¾æ‰€å¹²æ‰°ã€‚æ¥ä¸‹æ¥çš„å‘å±•å°†å–å†³äºä½ å¦‚ä½•åº”å¯¹å½“å‰çš„æŒ‘æˆ˜å’Œæœºé‡ã€‚\n\n`:"custom"===c&&(l+=`å…³äº"${e}"ï¼Œè¿™ä¸‰å¼ ç‰Œå…±åŒè¡¨æ˜ï¼Œä½ æ­£å¤„äºä¸€ä¸ª${r()}çš„é˜¶æ®µã€‚å½“å‰çš„æƒ…å†µéœ€è¦ä½ ${s("å»ºè®®",!0)}ï¼Œæœªæ¥çš„å‘å±•å°†ä¼š${a()}ã€‚\n\n`),"function"==typeof i&&(i(l),await new Promise(n=>setTimeout(n,500))),l+="**å…·ä½“å»ºè®®**\n\n",l+=`1. ${s("å»ºè®®",!0)}\n`,l+=`2. ${s("å»ºè®®",!0)}\n`,l+=`3. ${s("å»ºè®®",!0)}\n`,"function"==typeof i&&i(l),l},i={handleStreamResponse:async(n,e,o,s,r)=>{try{{console.log("ä½¿ç”¨æ ‡å‡†fetchå¤„ç†SSE");const s=await t(n,e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const c=s.body.getReader(),i=new TextDecoder;let l="";for(;;){const{done:n,value:t}=await c.read();if(n){console.log("SSEæµç»“æŸ"),r&&r();break}l+=i.decode(t,{stream:!0});const e=l.split("\n");l=e.pop()||"";for(const s of e)if(""!==s.trim()&&s.startsWith("data:"))try{const n=s.slice(5).trim();if("[DONE]"===n)continue;const t=JSON.parse(n);o&&o(t)}catch(a){console.error("è§£æSSEæ•°æ®å¤±è´¥:",a,s)}}return{abort:()=>c.cancel()}}}catch(c){return console.error("SSEå¤„ç†å¤±è´¥:",c),s&&s(c),r&&r(),{abort:()=>{}}}}},l="demo-key-for-build",m="https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",u=(n,t,e,o,s)=>{const r=n.map((n,t)=>{let e="";return"daily"===o||"quick"===o?e=0===t?"è¿‡å»/é—®é¢˜æ ¹æº":1===t?"ç°åœ¨/å½“å‰æƒ…å†µ":"æœªæ¥/å¯èƒ½ç»“æœ":"custom"===o&&(e=0===t?"å½“å‰çŠ¶å†µ":1===t?"éšœç¢æˆ–åŠ©åŠ›":"å»ºè®®æˆ–ç»“æœ"),`${e}: ${n.name}(${n.isUpright?"æ­£ä½":"é€†ä½"}) - ${n.isUpright?n.uprightMeaning:n.reversedMeaning}`}).join("\n");let a="";"daily"===o?a="ä»Šæ—¥":"quick"===o?a="ç”Ÿæ´»":"custom"===o&&(a=e);let c="";const i=s?`åŸºç¡€è§£è¯»å†…å®¹ï¼š\n${s}\n\n`:"";return console.log(`æ„å»ºAIæ·±åº¦è§£è¯»æç¤ºè¯: ç±»å‹=${o}, ç‰Œé˜µ=${t}, é—®é¢˜=${a||"æ— "}`),"daily"===o?c=`è¯·ä½ ä½œä¸ºä¸€ä½ä¸“ä¸šçš„å¡”ç½—ç‰Œè§£è¯»å¸ˆå’Œå¿ƒç†å­¦ä¸“å®¶ï¼Œä½¿ç”¨é€šä¹‰åƒé—®-Plusæ¨¡å‹ä¸ºæˆ‘æä¾›ä»Šæ—¥å¡”ç½—ç‰Œçš„æ·±åº¦AIè§£è¯»ã€‚æˆ‘æŠ½åˆ°äº†ä»¥ä¸‹ä¸‰å¼ ç‰Œ:\n${r}\n\n${i}è¯·åŸºäºä»¥ä¸Šä¿¡æ¯ï¼Œæä¾›æ›´æ·±å±‚æ¬¡çš„å¿ƒç†å­¦å’Œè±¡å¾æ„ä¹‰åˆ†æï¼ŒåŒ…æ‹¬ï¼š\n1. ä»å¿ƒç†å­¦è§’åº¦åˆ†æè¿™äº›ç‰Œé¢ç»„åˆåæ˜ çš„æ½œæ„è¯†çŠ¶æ€\n2. æä¾›æ›´å…·ä½“çš„è¡ŒåŠ¨å»ºè®®å’Œè‡ªæˆ‘æå‡æ–¹å‘\n3. åˆ†æå¯èƒ½é¢ä¸´çš„æŒ‘æˆ˜å’Œå¦‚ä½•å…‹æœ\n4. æä¾›ä¸€ä¸ªç®€çŸ­çš„å†¥æƒ³æˆ–åæ€ç»ƒä¹ ï¼Œå¸®åŠ©æˆ‘æ›´å¥½åœ°åº”ç”¨è¿™ä¸ªè§£è¯»\n\nè¯·ä½¿ç”¨ä¸“ä¸šä½†æ˜“äºç†è§£çš„è¯­è¨€ï¼Œåœ¨è¾“å‡ºæ–‡å­—ä¸­é€‚å½“åŠ å…¥ğŸ§ ğŸ’­ğŸŒˆâœ¨ç­‰å°å›¾æ ‡å¢åŠ å¯è¯»æ€§ï¼Œå¹¶ä½¿ç”¨Markdownæ ¼å¼ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œåˆ†æ®µã€‚`:"quick"===o?c=`è¯·ä½ ä½œä¸ºä¸€ä½ä¸“ä¸šçš„å¡”ç½—ç‰Œè§£è¯»å¸ˆå’Œå¿ƒç†å­¦ä¸“å®¶ï¼Œä½¿ç”¨é€šä¹‰åƒé—®-Plusæ¨¡å‹ä¸ºæˆ‘æä¾›ç”Ÿæ´»é—®é¢˜çš„æ·±åº¦AIè§£è¯»ã€‚æˆ‘æŠ½åˆ°äº†ä»¥ä¸‹ä¸‰å¼ ç‰Œ:\n${r}\n\n${i}è¯·åŸºäºä»¥ä¸Šä¿¡æ¯ï¼Œæä¾›æ›´æ·±å±‚æ¬¡çš„å¿ƒç†å­¦å’Œè±¡å¾æ„ä¹‰åˆ†æï¼ŒåŒ…æ‹¬ï¼š\n1. ä»å¿ƒç†å­¦è§’åº¦åˆ†æè¿™äº›ç‰Œé¢ç»„åˆåæ˜ çš„æ½œæ„è¯†çŠ¶æ€\n2. æä¾›æ›´å…·ä½“çš„è¡ŒåŠ¨å»ºè®®å’Œè‡ªæˆ‘æå‡æ–¹å‘\n3. åˆ†æå¯èƒ½é¢ä¸´çš„æŒ‘æˆ˜å’Œå¦‚ä½•å…‹æœ\n4. æä¾›ä¸€ä¸ªç®€çŸ­çš„å†¥æƒ³æˆ–åæ€ç»ƒä¹ ï¼Œå¸®åŠ©æˆ‘æ›´å¥½åœ°åº”ç”¨è¿™ä¸ªè§£è¯»\n\nè¯·ä½¿ç”¨ä¸“ä¸šä½†æ˜“äºç†è§£çš„è¯­è¨€ï¼Œåœ¨è¾“å‡ºæ–‡å­—ä¸­é€‚å½“åŠ å…¥ğŸ§ ğŸ’­ğŸŒˆâœ¨ç­‰å°å›¾æ ‡å¢åŠ å¯è¯»æ€§ï¼Œå¹¶ä½¿ç”¨Markdownæ ¼å¼ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œåˆ†æ®µã€‚`:"custom"===o&&(c=`è¯·ä½ ä½œä¸ºä¸€ä½ä¸“ä¸šçš„å¡”ç½—ç‰Œè§£è¯»å¸ˆå’Œå¿ƒç†å­¦ä¸“å®¶ï¼Œä½¿ç”¨é€šä¹‰åƒé—®-Plusæ¨¡å‹ä¸ºæˆ‘æä¾›å…³äº"${e}"çš„æ·±åº¦AIè§£è¯»ã€‚æˆ‘æŠ½åˆ°äº†ä»¥ä¸‹ä¸‰å¼ ç‰Œ:\n${r}\n\n${i}è¯·åŸºäºä»¥ä¸Šä¿¡æ¯ï¼Œæä¾›æ›´æ·±å±‚æ¬¡çš„å¿ƒç†å­¦å’Œè±¡å¾æ„ä¹‰åˆ†æï¼ŒåŒ…æ‹¬ï¼š\n1. ä»å¿ƒç†å­¦è§’åº¦åˆ†æè¿™äº›ç‰Œé¢ç»„åˆåæ˜ çš„æ½œæ„è¯†çŠ¶æ€\n2. æä¾›æ›´å…·ä½“çš„è¡ŒåŠ¨å»ºè®®å’Œè‡ªæˆ‘æå‡æ–¹å‘\n3. åˆ†æå¯èƒ½é¢ä¸´çš„æŒ‘æˆ˜å’Œå¦‚ä½•å…‹æœ\n4. æä¾›ä¸€ä¸ªç®€çŸ­çš„å†¥æƒ³æˆ–åæ€ç»ƒä¹ ï¼Œå¸®åŠ©æˆ‘æ›´å¥½åœ°åº”ç”¨è¿™ä¸ªè§£è¯»\n\nè¯·ä½¿ç”¨ä¸“ä¸šä½†æ˜“äºç†è§£çš„è¯­è¨€ï¼Œåœ¨è¾“å‡ºæ–‡å­—ä¸­é€‚å½“åŠ å…¥ğŸ§ ğŸ’­ğŸŒˆâœ¨ç­‰å°å›¾æ ‡å¢åŠ å¯è¯»æ€§ï¼Œå¹¶ä½¿ç”¨Markdownæ ¼å¼ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œåˆ†æ®µã€‚`),c},h=async(n,o)=>{var s;const r={model:"qwen-plus",messages:[{role:"user",content:n}],stream:!0,max_tokens:2e3};try{if(e.start("AIè§£è¯»APIè°ƒç”¨"),"function"==typeof o){const n=await $(r,o);return e.end("AIè§£è¯»APIè°ƒç”¨"),n}{r.stream=!1,console.log("å¼€å§‹éæµå¼è°ƒç”¨é€šä¹‰åƒé—®API...");const n=await t(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(r)});if(!n.ok){const t=await n.json();throw new Error(`é€šä¹‰åƒé—®APIé”™è¯¯: ${(null==(s=t.error)?void 0:s.message)||n.statusText}`)}const o=(await n.json()).choices[0].message.content,a=e.end("AIè§£è¯»APIè°ƒç”¨");return console.log(`âœ… éæµå¼APIè°ƒç”¨å®Œæˆï¼Œå“åº”é•¿åº¦: ${o.length}å­—ç¬¦ï¼Œè€—æ—¶: ${a}ms`),o}}catch(a){throw e.end("AIè§£è¯»APIè°ƒç”¨"),a}},$=async(n,t)=>{let o="",s=0,r=0;try{e.start("AIè§£è¯»APIè¯·æ±‚");const a={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(n)};e.start("AIè§£è¯»æµå¼è¾“å‡º");await i.handleStreamResponse(m,a,n=>{try{if(n.choices&&n.choices[0]&&n.choices[0].delta&&n.choices[0].delta.content){if(s++,1===s){r=Date.now();const n=e.end("AIè§£è¯»APIè¯·æ±‚");console.log(`ğŸš€ AIè§£è¯»APIè¿æ¥æˆåŠŸï¼Œè€—æ—¶: ${n}ms`),console.log(`âš¡ é¦–ä¸ªAIè§£è¯»å†…å®¹å—æ¥æ”¶ï¼Œè€—æ—¶: ${r-e.startTimes["AIè§£è¯»æµå¼è¾“å‡º"]}ms`)}const a=n.choices[0].delta.content;o+=a,"function"==typeof t&&t(o)}}catch(a){console.error("å¤„ç†SSEæ¶ˆæ¯å¤±è´¥:",a)}},n=>{console.error("SSEæµå¤„ç†é”™è¯¯:",n),e.end("AIè§£è¯»APIè¯·æ±‚"),e.end("AIè§£è¯»æµå¼è¾“å‡º")},()=>{const n=e.end("AIè§£è¯»æµå¼è¾“å‡º");console.log(`âœ¨ AIè§£è¯»æµå¼è¾“å‡ºå®Œæˆï¼Œå…±æ¥æ”¶${s}ä¸ªå†…å®¹å—ï¼Œæ€»è€—æ—¶: ${n}ms`)});return await new Promise(n=>setTimeout(n,500)),o}catch(a){throw console.error("æµå¼è°ƒç”¨é€šä¹‰åƒé—®APIå¤±è´¥:",a),e.end("AIè§£è¯»APIè¯·æ±‚"),e.end("AIè§£è¯»æµå¼è¾“å‡º"),a}},d={generateAIInsight:async(n,t,o="",s="daily",r="",a)=>{console.log(`å¼€å§‹ç”ŸæˆAIæ·±åº¦è§£è¯»: ç±»å‹=${s}, ç‰Œé˜µ=${t}, é—®é¢˜=${o||"æ— "}`),console.log("æŠ½å–çš„ç‰Œ:",n.map(n=>n.name).join(", "));const i=u(n,t,o,s,r);try{0;const r="function"==typeof a?((n,t=100)=>{let e=0,o=null,s="";return r=>{const a=Date.now();s=r,a-e>=t?(e=a,n(r)):(clearTimeout(o),o=setTimeout(()=>{e=Date.now(),n(s)},t))}})(a,80):null;e.start("AIæ·±åº¦è§£è¯»");try{const n=await h(i,r),t=e.end("AIæ·±åº¦è§£è¯»");return console.log(`âœ… AIæ·±åº¦è§£è¯»ç”Ÿæˆå®Œæˆï¼Œæ€»è€—æ—¶: ${t}msï¼Œå†…å®¹é•¿åº¦: ${n.length}å­—ç¬¦`),n}catch(l){console.error("é€šä¹‰åƒé—®APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ¨¡æ‹ŸæœåŠ¡ä½œä¸ºå¤‡é€‰:",l),console.log("ä½¿ç”¨æœ¬åœ°æ¨¡æ‹ŸæœåŠ¡ç”ŸæˆAIæ·±åº¦è§£è¯»...");const a=await c(n,t,o,s,r),i=e.end("AIæ·±åº¦è§£è¯»");return console.log(`âœ… æœ¬åœ°æ¨¡æ‹ŸAIæ·±åº¦è§£è¯»ç”Ÿæˆå®Œæˆï¼Œæ€»è€—æ—¶: ${i}msï¼Œå†…å®¹é•¿åº¦: ${a.length}å­—ç¬¦`),a}}catch(m){throw console.error("AIæ·±åº¦è§£è¯»ç”Ÿæˆå¤±è´¥:",m),e.end("AIæ·±åº¦è§£è¯»"),new Error(`AIæ·±åº¦è§£è¯»ç”Ÿæˆå¤±è´¥: ${m.message}`)}}};export{d as a,e as p};
